# 数据库建模总结

### 一、主键字段的设计(pk)

主键字段：主键是用来唯一标识一条记录的，通常叫做ID；



**主键的分类**：主键字段按照性质来区分的话分为自然主键和业务主键；

- 自然主键：主键值是和业务没有关系的自然数（**推荐**）

- 业务主键：主键值和系统业务关联（不推荐）

  例如：银行卡号作为主键、身份证作为主键……

  不推荐使用，因为主键值和系统的业务关联的话，一旦业务发生变化，主键值也会随之发生变化。有的变化可能导致主键重复等问题；

  

**主键字段的类型和长度设计**：主键字段的类型和长度应该由主键值的生成方式来决定；

常见的主键值生成方式：

- 添加自增约束（不推荐）：为字段添加自增约束，借助数据库的自增机制来生成主键值；

  由于数据库生成效率低，所以不推荐；

- assighed（推荐）：程序员手动生成主键值，为了保证主键的非空性和唯一性通常使用算法来实现；

  常用的算法：

  1）hi/low：数值型、长度由数据量来决定；

  2）UUID（**推荐、常用**）：字符串，32位长度，JDK已经实现（java.util）；

- 共享主键（不推荐）：将主键值长度和类型设计成和另一张表的主键一模一样；
- 联合主键（不推荐）：由多个字段的类型和长度决定；



### 二、外键字段的设计

外键字段：将一张表冗余的数据拆成两张或多张表，可以节约磁盘空间，解决数据冗余问题，而外键是用来确定表和表之间的关系。

**表和表之间的关系：**

1）**一对多**：A表中一条记录对应B表多条记录，B表中的多条记录对应A表中的一条记录；

- 示例：一个班级有多个学生，而多个学生可以有同一个班级；

- A【1】父表------------B【n】子表 

- 添加记录的时候先添加父表记录，再添加字表记录；

  删除记录的时候先删除字标记录，然后再删除父表记录；

  查询数据的时候可能进行关联查询；



2）**一对一**：A表中的一条记录对应B表中的一条记录，B表中的一条记录对应A表中的一条记录；

实现方式：共享主键（耦合度高，不推荐）、唯一外键（一种特殊的一对多，在多的一方加上唯一性约束）；

