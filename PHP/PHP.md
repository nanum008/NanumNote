# PHP笔记

## 一、概述

### 1.PHP是什么？

- php是一个开源的脚本语言；
- php脚本在服务器上执行；
- php是免费下载；

### 2.PHP文件是什么

1. php文件的后缀是`.php`；

2. php文件中包含了HTML,JS,PHP；
3. php文件在服务器上执行，结果以HTML文件的形式返回给浏览器；

### 3.PHP能做什么？

- php可以生成动态的页面内容

- php可以创建、打开、读取、关闭服务器上的文件；

- php可以操作数据库；

- php可以手机表单数据；

- php可以发送和接受`Cookie`；

- php可以限制用户访问网站上的一些页面；

- php可以加密数据；

### 4.为什么3要使用PHP？

因为php是免费开源的、能对市面上的DBMS有一个广泛的支持、具有跨平台性、几乎支持所有的语法、易学习

## 二、基础语法

1. 以`;`结尾；
2. 输出：`echo``print`;
3. 文件后缀：`.php`;



### 1 变量

---

- 变量以￥开头；

- 变量区分大小写；
- 变量不能以数字开头；
- 变量名可以由字母、数字、下划线组成；
- 变量名不能包含空格；



### 2 输出

---

在php当中使用`print`和`echo`进行输出;

二者区别如下：

1. `echo`可以输出一个或多个字符；
2. `print`只能输出一个字符；
3. `echo`比`print`快;



### **数组**

---

**数组是什么？**

数组是能在单个变量中存储多个值的特殊变量；

数组使用`array()`函数进行创建；



**数组的分类**

数组分为：索引数组、关联数组、多维数组；



**索引数组**

索引数组的创建

```php
//使用array()函数进行创建；
$arr = array('a','b','c','d'); 
```



获取数组的长度

```php
$arr = array('a','b','c','d');
$length = count($arr);
```



数组的访问

```php
//我们可以通过索引对进行数组当中的元素进行访问；
$arr = array('a','b','c','d');
echo $arr[0];//->a
```



数组的遍历

```php
$arr = array('a','b','c','d');
for($i = 0;$i<count($arr);$i++){
    echo $arr[$i];
}
```



**关联数组**

---

关联数组的遍历

```php
	//遍历关联数组
	$arr = array('num'=>'2020','age'=>'18','name'=>'张三');
	foreach($arr as $key=>$value){
	    echo '键名：'.$key.'<br/>';
		echo '键值：'.$value.'<br/><br/>';
	}
```





**多维数组**

---

多维数组的创建及访问

```php
//创建
$arr = array(
	0=>array(),
	1=>array(),
    2=>array(),
    ……
);

//访问
echo $arr[0][0]//访问第一个元素；
```



**数组函数**

---

- `array_merge(数组1,数组2,数组3……)`

  把一个或多个数组合并到一起形成一个新的数组；



- `array_rand(数组,随机的个数)`

  返回数组中随机键名；



- `array_flip(数组)`

  将键名与值互换；



- `array_values(数组)`&`array_key(数组)`

  array_values(数组)：获得数组的值；array_key(数组)：获得数组的键名；



- `array_search('值',数组)`

  在数组中搜索值，如果有则返回键名；



- `array_unique(数组)`

  删除数组当中的重复值



- `range(最小数，最大数)`

  返回一个在此范围内的随机数；



### 自定义函数

---

语法

```php
function 函数名(参数……){
    函数体
}
```





## for表单

- 预定义变量:$_FILES:存储用户上传的文件信息Name:文件在用户浏览器端实际存在的名字Type:文件的类型
- Tmp_name:文件上传到服务器后操作系统保存的临时路径
- Error:文件上传的代号，用来告知应用软件处理过程遇到的问题Size:文件大小
- ls_uploaded_file()
- Move_upload_file(所在的临时目录)移动上传的文件







## 三、流程控制语句

1.条件语句
if                      条件成立时执行代码
if...else             如果条件成立时执行一块代码否则执行另一块代码
if....elseif...else...else      若干条件中成立一个条件执行一块代码，若干条件都不成立时则执行另一块代码
Switch    若干条件中成立一个条件执行一块代码，若干条件都不成立时则执行另一块代码



语法：
if（条件1）



Switch(等值)
{
Case   条件
}

2.循环语句
For
While
Do.....while

语法：
For（初始值，条件，增值）
{
要循环的语句;
}

例：输出1-100
初始值：1
条件:<=100
增值：++


初始值对比条件，如果符合则做语句，然后进行增减后的值去对比条件，符合又做语句又增减依旧直至增减后的值不符合条件则跳出。

初始值
whil（条件）
{
循环语句
}
增值


初始值
Do{
循环语句;
增值；
}while（条件）

案例：
九九乘法表


1*1=1
1*2=2     2*2=4
1*3=3     2*3=6     3*3=9
1*4=4     2*4=8     3*4=12     4*4=16     
1*5=5     2*5=10   3*5=15     4*5=20     5*5=25
1*6=6     2*6=12   3*6=18     4*6=24     5*6=30     6*6=36
1*7=7     2*7=14   3*7=21     4*7=28     5*7=35     6*7=42     7*7=49
1*8=8     2*8=16   3*8=24     4*8=32     5*8=40     6*8=48     7*8=56
1*9=9     2*9=18   3*9=27     4*9=36     5*9=45     6*9=54     7*9=63




注意：{变量}原样输出
作业：请用while写出九九乘法表
思考（5分）：倒序做九九乘法表

## 四、函数

1.数组

      （1）数组是什么？
       数组能在单个变量中存储多个值得特殊变量
       （2）数组的定义
         Array（）函数进行创建
        语法：
        $变量名=array（）括号中可以安装用户的需要给定任意个数，任意类型的数据元素取值
        例：
        $arr1=array('a','b','c','d')
      （3）获取数组的长度
        Count(数组)
        (4)数组的类型
        ①索引数组
        指带有数字索引的数组，使用递增的自然数列0,1,2......
        $arr[1]
        遍历索引数组的值
        for($i=0;$i<count($arr);$i++)
        {
        }
    
        ②关联数组
        指带有指定键的数组，数组元素的键名是由用户根据数组元素值得意义来定义的，定义数组时需要使用   key=>value（即“键名”=>“值”）
        例：$arr=array('name'=>'ls','sex'='女','age'=>'29')
        $arr['name']
        遍历关联数组
        foreach(数组名  as$value)
        {
        
        }
        foreach(数组名  )
        ③多维数组
        $arr=array(
        0=>array()
        1=>array()
        2=>array()
        )
        $arr[1][1]
    
       作业：0-9   A-Z  a-z
        分别使用索引数组，关联数组，多维数组写出来并进行遍历


（5）
	Array_merge(数组1，数组2......)把一个或多个数组组合到一起形成一个新的数组
	Array_rand(数组，随机的个数)返回数组中随机键名
	Array_flip(数组)键名与值交换

	Range（最小值，最大值）产生一个此范围的数组
	Array_values（数组）获得数组的值
	Array_key（数组）获得数组的键名
	In_arraya('值',数组）在数组中搜索值
	Array_search（'值'，数组）在数组中搜索值，如果存在返回键名
	Array_key_exists（'值'，数组）检索给定的键名是否存在数组中
	Array_unique（数组）用于删除数组中的重复值，并返回没有重复值的新数组
	Range（最小值，最大值）产生一个此范围的数组
## 五、自定义函数

Function函数名（变量）{
功能代码；
结果；
Return 结果；
}
调用函数
Echo  函数名（真值）

函数是封装的一个功能区，里面的所有的东西跟外面都无关系，唯一能跟外界建立关系的是
function   函数名（变量）------调用的时候    函数名（真实值）
Echo:输出结果----用户能看见
Return:返回结果-----不能看见---中断代码执行

2.图形函数

形成图形验证码
1.画一个宽为多少，高为多少的长方形
imagecreate(图形的宽，图形的高);
2.用颜料桶给长方形加颜色
imagecolorallocate(图形,红,绿,蓝)----用第一次是上背景颜色
3.写入文本-----已经随机数
   （1）找文本的位置（找第一个文本的x,y的位置）
X=（画宽-随宽）/2
Y=（画高-随高）/2
Imagesx（）画布的宽
Imagesy（）画布的高
imagefontwidth（）字符宽度----取决于字体大小
imagefontheight（）字符高度----取决于字体大小
   （2）给文本上颜色
imagecolorallocate（）：其他的时候就是给文本或者像素上颜色
   （3）把文本画入长方形中
imagestring（图形，字体大小，x轴，y轴，文本颜色）
4.加入点点
imagesetpixel(图形，x轴，y轴，颜色)
5.加入直线
imageline（图形，开始点x轴，结束点x轴，结束点y轴，颜色）
给浏览器说明是图片文件
header('content-typet:image/png')
6.保存图片
imagepng（）,imagegif（）,imagejpeg（）
7.销毁图片----释放内存
imagedestroy()


3.预定义变量

$_POST[]
$_SESSION[]:
作用：用于跨页面存储信息---记在服务器中
1.存储信息
session_start()//开启记住盒子
$_SESSION('盒子的名字')=信息//把信息放入盒子中

2.拿去信息
session_start()//开启记住盒子
$变量=$——session['盒子的名字']

注意：一个页面只有一个session_start()

3.$_GET[]
作用：浏览器地址、表单、超链接
链接：     文件名？参数1=值 1&参数2=值 2&
$_GET['参数1']

4.文件函数
fopen（）打开文件
R：只读方式打开
R+：读写方式打开，从最开始写
W：只写方式打开，如果文件存在，则删除已有内容，如果文件不存在则创建文件
W+：读写方式打开,如果文件存在，则删除已有内容，如果文件不存在则创建文件
fwrite（已打开的文件，写入的字符串）在文件中写入内容
fread（已打开的文件，需要读取字符串的最大字节数）在文件中读取内容
fclose（已打开的文件）关闭文件
filesize（文件名）文件的字节数
file_exists（文件名）判断文件是否存在的

explode（在哪个地方打散）把字符串打散为数组
implode(元素之间放置的内容，数组)把数组的元素组合成字符串
注意：写和读取要分开进行
判断一下文件是否存在
存在的时候：r+
不存在：w+

例子：在test.txt文件中写入welcome
1.打开文件----r/w+
2.写入内容
3.关闭文件



文件投票统计
1.判断文件是否存在
2.文件不存在----！File_exists（）
  （1）创建文件-----fopen（,'w+'）
  （2）写入初始值-----fwrite（）
  （3）关闭文件（保存）-----fclose
3.文件存在---文件中肯定就有值
  （1）读取文件中的值
	①打开文件---fopen（,'r'）
	②读取文件内容---fread（）
	③关闭文件（保存）
  （2）判断选择的是哪一项进行+1操作
	①当获取的name的值相等时
	②读取文件内容值++
  （3）把+1后的值放入文件中
	①打开文件----fopen（,'w'）
	②写入++后的值-----fwrite（）
	③关闭文件（保存）

	案例：上传文件
	原理：把电脑本地的文件传到服务器中
	前台写法：file按钮
	Form表单必须具备-----method=post      enctype=multipart/form-data
流程：
从前台file按钮获取本地文件，通过提交按钮发送服务器中，服务器接收文件放入到指服务器指定目录下
	1.写文件表单（注意：method的值必须为post，必须写入属性enctype=mulitpart/form-data）
	2.用户从本地选择一个文件（点击选择文件按钮）
	3.用户点击提交：文件会通过互联网传输到服务器中
	4.服务器操作系统会将文件保存到临时目录
	5.服务器脚本开始工作：判断文件是否有效
	6.服务器脚本将有效文件从临时目录移动到指定目录下
预定义变量：$_FILES:存储用户上传的文件信息
name：文件在用户浏览器端实际存在的文字
type：文件的类型
tmp_name：文件上传到服务器后操作系统保存的临时路径
error：文件上传的代号，用来告知应用软件处理过程遇到的问题
sizi：文件大小



## 六、PHP操作数据库

操作数据库步骤：

1. 连接数据库服务器

   Mysqli_connect(服务器名，用户名，密码)

2. 选择数据库；

   Mysqli_select_db(连接服务器标志，数据库名)

3. 操作数据表；

   1)sql语句：crud

   2)执行sql语句

   Mysqli_query(连接服务器标志，sql语句)

4. 关闭数据库连接;

   Mysqli_close(连接服务器标志)





关闭MySQL服务：

此电脑--》显示更多选项--》管理--》服务和应用程序



【查询操作步骤】

1、连接数据库服务器；

​	mysqli_connect()

2、选择数据库；

​	mysqli_select_db()

3、操作表的数据；

​	1）写sql语句；

​	2）执行sql语句；

​	mysqli_query()

​	3）解析结果集；

​	mysqli_fetch_array(执行sql语句的结果),该函数获取的是一维数组，每次解析一行；

​	4）释放结果集；

​	mysqli_free_result(执行sql语句的结果)

4、关闭连接；

​	mysqli_close()
